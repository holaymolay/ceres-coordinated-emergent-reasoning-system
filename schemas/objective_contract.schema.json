{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ObjectiveContract",
  "type": "object",
  "required": ["goal", "status", "success_criteria"],
  "properties": {
    "spec_id": {
      "type": "string",
      "minLength": 1,
      "description": "Spec identifier allocated after elicitation completes."
    },
    "goal": {
      "type": "string",
      "description": "Primary objective in plain language."
    },
    "constraints": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Hard constraints that must be respected."
    },
    "success_criteria": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Verifiable acceptance criteria."
    },
    "allowed_sources": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Approved context sources (repos, docs, tools)."
    },
    "risk_profile": {
      "type": "string",
      "description": "Risk appetite or profile tag (e.g., low/medium/high)."
    },
    "status": {
      "type": "string",
      "enum": ["draft", "committed"],
      "description": "Lifecycle stage of the objective."
    },
    "notes": {
      "type": "string",
      "description": "Free-form notes or provenance."
    },
    "verifiable_claims": {
      "type": "array",
      "description": "Claims that require external verification evidence.",
      "items": { "$ref": "#/definitions/verifiableClaim" }
    },
    "verifier_evidence_policy": {
      "$ref": "#/definitions/verifierEvidencePolicy"
    }
  },
  "additionalProperties": false,
  "definitions": {
    "verifiableClaim": {
      "type": "object",
      "required": ["id", "description"],
      "properties": {
        "id": { "type": "string", "minLength": 1 },
        "description": { "type": "string", "minLength": 1 },
        "verifier_type": {
          "type": "string",
          "enum": ["exec", "schema", "invariant", "other"]
        },
        "evidence_refs": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Paths to evidence artifacts or logs."
        },
        "notes": { "type": "string" }
      },
      "additionalProperties": false
    },
    "verifierEvidencePolicy": {
      "type": "object",
      "properties": {
        "mode": {
          "type": "string",
          "enum": ["advisory", "enforce"],
          "default": "advisory"
        }
      },
      "additionalProperties": false
    }
  }
}
